<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Accueil du Eportfolio 4 &eacute;toiles</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
	<!-- =========================================== -->
	<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap-responsive.min.css" />
	<link rel="stylesheet" type="text/css" href="../../other/css/bootstrap-wysihtml5.css" />
	<link rel="stylesheet" type="text/css" href="../../other/css/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" href="../../other/css/font-awesome/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="../../karuta/css/karuta.css" />
	<link rel="stylesheet" type="text/css" href="../../other/pick-a-color/css/pick-a-color-1.1.8.min.css" />
	<!-- =========================================== -->
	<script src="../../other/js/jquery-1.10.2.js"></script>
	<script src="../../other/js/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="../../other/bootstrap/js/bootstrap.min.js"></script>
	<script src='../../other/wysihtml5/wysihtml5-0.3.0.js'> </script>
	<script src='../../other/wysihtml5/parser.js'> </script>
	<!--[if lt IE 9]>
		<script src='http://html5shiv.googlecode.com/svn/trunk/html5.js'></script>
	<![endif]-->
	<script src="../../other/js/bootstrap-wysihtml5.js"></script>
	<script src="../../other/js/jquery_hotkeys.js"></script>
	<script src="../../other/js/JQueryRC4.js"></script>
	<script src="../../other/js/spin.js"></script>
	<script src="../../other/js/jquery.spin.js"></script>
	<script src="../../other/js/js.cookie.js"></script>
	<!-- =============================================================== -->
	<script src="../../karuta/js/karuta.js"></script>
	<script src="../../karuta/js/UICom.js"></script>
	<!-- =============================================================== -->
	<script src="../../karuta/js/model/Type_Portfolio.js"></script>
	<script src="../../karuta/js/model/Type_Node.js"></script>
	<script src="../../karuta/js/model/Type_User.js"></script>
	<script src="../../karuta/js/UICom.js"></script>
	<!-- =============================================================== -->
	<link type="text/css" href="../../other/lightbox/css/lightbox.css" rel="stylesheet" />
	<script src="../../other/lightbox/js/lightbox-2.6.min.js"></script>
	<!-- =============================================================== -->
	<link type="text/css" href="../../other/jplayer/jplayer.blue.monday.css" rel="stylesheet" />
	<script src="../../other/jplayer/jquery.jplayer.min.js"></script>
	<!-- =============================================================== -->
	<script src="../../other/js/jquery.ui.widget.js"></script>
	<script src="../../other/js/jquery.iframe-transport.js"></script>
	<script src="../../other/js/jquery.fileupload.js"></script>
	<!-- =============================================================== -->
	<script src="../../other/bootstrap-datepicker/bootstrap-datepicker.js"></script>
	<script src="../../other/bootstrap-datepicker/bootstrap-datepicker.fr.js"></script>
	<link rel="stylesheet" href="../../other/bootstrap-datepicker/datepicker.css" />
	<!-- =============================================================== -->
	<script src="../../karuta/js/resources/Type_Calendar.js"></script>
	<script src="../../karuta/js/resources/Type_Comments.js"></script>
	<script src="../../karuta/js/resources/Type_Document.js"></script>
	<script src="../../karuta/js/resources/Type_Proxy.js"></script>
	<script src="../../karuta/js/resources/Type_TextField.js"></script>
	<script src="../../karuta/js/resources/Type_Field.js"></script>
	<script src="../../karuta/js/resources/Type_Image.js"></script>
	<script src="../../karuta/js/resources/Type_Get_Resource.js"></script>
	<script src="../../karuta/js/resources/Type_Get_Get_Resource.js"></script>
	<script src="../../karuta/js/resources/Type_URL.js"></script>
	<script src="../../karuta/js/resources/Type_Item.js"></script>
	<script src="../../karuta/js/resources/Type_Video.js"></script>
	<script src="../../karuta/js/resources/Type_Color.js"></script>
	<!-- =============================================================== -->
	<script src="../../karuta/js/report.js"></script>
	<script src="../../application/_init.js"></script>
	<!-- =============================================================== -->
	<script src="../../karuta/js/version.js"></script>
	<!-- =============================================================== -->
	<script src="../../karuta/js/languages/locale_fr.js"></script>
	<!-- =============================================================== -->
	<script src="../js/iut2.js"></script>
	<script src="../js/locale_lang.js"></script>
	<script src="../js/experience.js"></script>
	<script src="../js/experience_perso.js"></script>
	<script src="../js/diploma.js"></script>
	<script src="../js/stage.js"></script>
	<script src="../js/formation.js"></script>
	<script src="../js/alternance.js"></script>
	<script src="../js/projet.js"></script>
	<script src="../js/contact.js"></script>
	<script src="../js/fullcontact.js"></script>
	<script src="../js/competence.js"></script>
	<script src="../js/qualites_perso.js"></script>
	<script src="../js/profile.js"></script>
	<script src="../js/cv.js"></script>
	<script src="../js/langue.js"></script>
	<script src="../js/feedback.js"></script>
	<script src="../js/monprojet.js"></script>
	<!-- =========================================== -->
	<script src="../../other/pick-a-color/js/tinycolor-0.9.15.min.js"></script>
	<script src="../../other/pick-a-color/js/pick-a-color-1.1.8.min.js"></script>
	<script src="../../other/js/jquery-qrcode-0.14.0.js"></script>
	<!-- =========================================== -->
	<link rel="stylesheet" href="../../application/css/specific.css" />
	
</head>
<body class="welcome">

		<div id='navigation_bar'></div>
		<div class="container" style='margin-top:60px'>

		<h2 class="line">KARUTA - <span id='title-page'></span></h2>
		<h4 class="line"><span class="badge">1</span> <span id='title-1'></span></h4>
		<div id='csv_file_upload' style='margin-left:20px'></div>
		<div style='margin-left:20px'> <span id='title-3'></span>&nbsp;<input  id='report-model_code' type='text'></input>&nbsp;<button onclick='report_processCode()'>ok</button></div>
		<div id='model_description' style='margin-left:20px'></div>
		<div id='csv_file_upload2' style='margin-left:20px'></div>
		<h4 class="line"><span class="badge">2</span> <span id='title-2'></span></h4>
		<div id='process_button' style='margin-left:20px'></div>
		<div id='log' style='margin-left:20px;margin-top:20px'></div>
		<div id='content' class="createreport"></div>
		<div id='pdf'></div>
		
		</div>

	<script language='javascript'>
		var json = null;;

		//------------------------------
		$(document).ready(function() {
			$.ajaxSetup({async: false});
			//------------------------------
			$.ajax({
				type : "GET",
				dataType : "xml",
				url : "../../../"+serverBCK+"/credential",
				data: "",
				success : function(data) {
					USER = new UIFactory["User"]($("user",data));
					userid = USER.id;
					}
			});
			//------------------------------
			$.ajax({
				type : "GET",
				dataType : "xml",
				url : "../../../"+serverVER+"/version",
				data: "",
				success : function(data) {		
					karuta_backend_version = $("number",$("#backend",data)).text();
					karuta_backend_date = $("date",$("#backend",data)).text();
					karuta_fileserver_version = $("number",$("#fileserver",data)).text();
					karuta_fileserver_date = $("date",$("#fileserver",data)).text();
				}
			});
			//------------------------------
			loadLanguages(function(data) {	$("#navigation_bar").html(getNavBar('batch',null));
											$("#title-head").html("KARUTA - "+karutaStr[LANG]['report']);
											$("#title-page").html(karutaStr[LANG]['report']);
											$("#title-1").html(karutaStr[LANG]['upload_csv_or_code']);
											$("#title-2").html(karutaStr[LANG]['process_csv']);
											$("#title-3").html(karutaStr[LANG]['model_code']);
										 });
			//------------------------------
			var lang = getURLParameter('lang');
			if (lang!=null) {
				LANG = lang;
				for (var i=0; i<languages.length;i++){
					if (languages[i]==lang)
						LANGCODE = i;
				}
			}
			//------------------------------
			var model_code = "";
			var html ="";
			var url = "../../../"+serverFIL+"/csv";
			html +=" <div id='divfileupload'>";
			html +=" <input id='fileupload' type='file' name='uploadfile' data-url='"+url+"'>";
			html += "</div>";
			html +=" <div id='progress'><div class='bar' style='width: 0%;'></div></div>";
			$("#csv_file_upload").append($(html));
			//------------------------------
			$("#fileupload").fileupload({
				progressall: function (e, data) {
					$("#progress").css('border','1px solid lightgrey');
					$("#divfileupload").html("<img src='../../karuta/img/ajax-loader.gif'>");
					var progress = parseInt(data.loaded / data.total * 100, 10);
					$('#progress .bar').css('width',progress + '%');
				},
				done: function (e, data,uuid) {
					$("#divfileupload").html("Loaded");
					json = data.result;
					model_code =json.model_code;
					report_getModelAndProcess(model_code,json);
					$("#log").append("<br>============== FIN ===========");
				}
		    });
			//------------------------------
		});
		//------------------------------
	</script>

</body></html>